(()=>{"use strict";var t,e={529:function(t,e,i){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var a=i(308),r=function(t){function e(){var e=t.call(this,{key:"game-scene"})||this;return e.players=[],e}return o(e,t),e.prototype.preload=function(){this.load.atlas("cards","./assets/cards.png","./assets/cards.json")},e.prototype.create=function(){this.stageWidth=this.sys.game.canvas.width,this.stageHeight=this.sys.game.canvas.height,this.createPlayers(),this.createDeck()},e.prototype.createPlayers=function(){var t=new a.Player({scene:this,name:"top-player",x:this.stageWidth/2,y:40,rotation:0,isMainPlayer:!1,cardSettings:{spacing:40,scale:.3}});this.players.push(t);var e=new a.Player({scene:this,name:"right-player",x:this.stageWidth-40,y:this.stageHeight/2,rotation:-90,isMainPlayer:!1,cardSettings:{spacing:40,scale:.3}});this.players.push(e);var i=new a.Player({scene:this,name:"bottom-player",x:this.stageWidth/2,y:this.stageHeight-40,rotation:0,isMainPlayer:!0,cardSettings:{spacing:40,scale:.3,isFaceUp:!0}});i.setCardThrowAnimation({cardSpacing:30,isFaceUp:!0,animationOptions:{x:i.x,y:400,rotation:0,scale:.3}}),this.players.push(i);var n=new a.Player({scene:this,name:"left-player",x:40,y:this.stageHeight/2,rotation:90,isMainPlayer:!1,cardSettings:{spacing:40,scale:.3}});this.players.push(n)},e.prototype.createDeck=function(){var t=this,e=new a.Deck({scene:this,texture:"cards",textureNames:{suits:{heartPrefix:"hearts",spadePrefix:"spades",clubPrefix:"clubs",diamondPrefix:"diamonds",jokers:["red_joker","black_joker"]},backside:"back-side"},options:{rotation:.2},onDeckClick:function(){t.players[2].removeCards(t.players[2].selectedCards),t.players[2].addCard(e.getTopCard())}});e.appendTo(this,this.stageWidth/2,this.stageHeight/2),e.setScale(.4,.4),e.deal({totalCardsToDeal:5,players:this.players,options:{delay:100,ease:"Power3"}})},e}(Phaser.Scene);e.default=r},607:(t,e,i)=>{i(260);var n=i(529),o={type:Phaser.AUTO,width:414,height:725,zoom:1,backgroundColor:"0xcccccc",input:{keyboard:!1,gamepad:!1},disableContextMenu:!0,scale:{mode:Phaser.Scale.FIT},render:{pixelArt:!1,antialias:!0,antialiasGL:!0},physics:{default:"arcade",arcade:{debug:!0,gravity:{y:0}}},scene:[n.default]};window.addEventListener("load",(function(){return new Phaser.Game(o)}))},308:function(t,e,i){var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(e,i);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,n,o)}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),o=this&&this.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||n(e,t,i)};Object.defineProperty(e,"__esModule",{value:!0}),o(i(694),e),o(i(265),e),o(i(684),e),o(i(992),e)},694:function(t,e,i){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.Card=void 0,i(260);var a=i(399),r=function(t){function e(e){var i,n=t.call(this,e.scene,0,0,e.graphics.texture,"")||this;n.config=e,n.name=e.graphics.frontFaceTextureName,n.suit=e.suit,n.rank=e.rank,n.isFaceUp=e.isFaceUp||!1,n._isSelected=!1,n._isFlipping=!1,n._flipZoom=(null===(i=e.animationOptions)||void 0===i?void 0:i.flipZoom)||.1;var o=n.isFaceUp?e.graphics.frontFaceTextureName:e.graphics.backFaceTextureName;n.setTexture(e.graphics.texture,o);var a=new Phaser.Geom.Rectangle(0,0,n.width,n.height);return n.setInteractive(a,Phaser.Geom.Rectangle.Contains),n}return o(e,t),e.prototype.flip=function(){var t=this.getBounds(),e=t.centerX,i=t.centerY;this.setOrigin(a.Utils.ORIGIN.MiddleCenter.x,a.Utils.ORIGIN.MiddleCenter.y),this.x=e,this.y=i,this._flipAnimationTimeline=this.createFlipAnimationTimeline(),this._isFlipping||this._flipAnimationTimeline.play()},e.prototype.showFace=function(t){var e=this.config.graphics,i=e.frontFaceTextureName,n=e.backFaceTextureName,o=t?i:n;this.setTexture(this.config.graphics.texture,o),this.isFaceUp=t},e.prototype.selected=function(t){return void 0!==t&&(this._isSelected=t),this._isSelected},e.prototype.moveTo=function(t){var e,i,n=this,o=t.x,a=t.y,r=t.scale||this.scale,s=t.rotation||0,c=(null===(e=t.options)||void 0===e?void 0:e.duration)||500,l=(null===(i=t.options)||void 0===i?void 0:i.ease)||"linear",p=this.scene.add.tween({targets:this,duration:c,x:o,y:a,scale:r,rotation:Phaser.Math.DegToRad(s),ease:l,onComplete:function(){p.destroy(),t.onAnimationComplete&&t.onAnimationComplete(n)}})},e.prototype.createFlipAnimationTimeline=function(){var t,e=this,i=((null===(t=this.config.animationOptions)||void 0===t?void 0:t.flipSpeed)||500)/4;return this.scene.add.timeline([{at:0,tween:{targets:this,scale:this.scale+this._flipZoom,duration:i,onStart:function(){e._isFlipping=!0}}},{at:i,tween:{targets:this,scaleX:0,duration:i,onComplete:function(){var t=e.config.graphics,i=t.texture,n=t.frontFaceTextureName,o=t.backFaceTextureName,a=e.isFaceUp?o:n;e.setTexture(i,a)}}},{at:2*i,tween:{targets:this,scale:this.scale+this._flipZoom,duration:i}},{at:3*i,tween:{targets:this,scale:this.scale,duration:i,onComplete:function(){var t,i;e._isFlipping=!1,e.isFaceUp=!e.isFaceUp,(null===(i=null===(t=e.config)||void 0===t?void 0:t.animationOptions)||void 0===i?void 0:i.onFlipAnimationComplete)&&e.config.animationOptions.onFlipAnimationComplete(e)}}}])},e}(Phaser.GameObjects.Sprite);e.Card=r},265:function(t,e,i){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.Deck=void 0;var a=i(399),r=function(t){function e(e){var i=t.call(this,e.scene,"playing-card-deck")||this;return i.config=e,i._cards=[],i}return o(e,t),e.prototype.appendTo=function(t,e,i){this.createDeck(t,e,i)},e.prototype.deal=function(t){var e,i=this,n=0,o=(null===(e=t.options)||void 0===e?void 0:e.delay)||200,a=t.players.length,r=t.totalCardsToDeal*a,s=this.scene.time.addEvent({delay:o,callback:function(){var e=n%a,o=t.players[e];if(n===r)s.remove(),t.onDealComplete&&t.onDealComplete();else{var c=i._cards.pop();c&&o.addCard(c)}n+=1},callbackScope:this,loop:!0})},e.prototype.getTopCard=function(){var t=this._cards[this._cards.length-1];return this._cards.length>0&&this._cards.pop(),t},e.prototype.isTopCard=function(t){var e=this._cards[this._cards.length-1].name;return t.name===e},e.prototype.setScale=function(t,e){this._cards.forEach((function(i){i.setScale(t,e)}))},e.prototype.setOrigin=function(t){this._cards.forEach((function(e){e.setOrigin(t.x,t.y)}))},e.prototype.createDeck=function(t,e,i){var n,o,r,s=this,c=(null===(n=this.config.options)||void 0===n?void 0:n.xSpace)||0,l=(null===(o=this.config.options)||void 0===o?void 0:o.ySpace)||0,p=(null===(r=this.config.options)||void 0===r?void 0:r.rotation)||0;Object.entries(this.config.textureNames.suits).forEach((function(t){for(var e,i,n=t[0],o=t[1],r="jokers"!==n?13:2,c=function(t){var r=void 0,c=void 0;"jokers"!==n?(r=t+t,c="".concat(o).concat(t+1)):(r=0,c=o[t]);var l=new a.Card({scene:s.config.scene,suit:n,rank:r,graphics:{texture:s.config.texture,frontFaceTextureName:c,backFaceTextureName:s.config.textureNames.backside},isFaceUp:(null===(i=null===(e=s.config)||void 0===e?void 0:e.options)||void 0===i?void 0:i.isFaceUp)||!1,animationOptions:{onFlipAnimationComplete:function(t){s.config.onCardFlipAnimationComplete&&s.config.onCardFlipAnimationComplete(t)}}});s._cards.push(l),s.config.onDeckClick&&l.on("pointerdown",(function(){s.config.onDeckClick&&s.config.onDeckClick(l)}))},l=0;l<r;l+=1)c(l)})),Phaser.Utils.Array.Shuffle(this._cards),this._cards.forEach((function(e){t.add.existing(e)})),this.setCardsPosition(e,i,c,l,p)},e.prototype.setCardsPosition=function(t,e,i,n,o){this._cards.forEach((function(a,r){a.x=t+i*r,a.y=e+n*r,a.rotation=Phaser.Math.DegToRad(o*r)}))},e}(Phaser.GameObjects.GameObject);e.Deck=r},684:function(t,e,i){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.Player=void 0;var a=i(399),r=function(t){function e(e){var i,n,o=t.call(this,e.scene,"player")||this;return o.config=e,o.hand=[],o.selectedCards=[],o.name=e.name,o.x=e.x,o.y=e.y,o.isFaceUp=(null===(n=null===(i=o.config)||void 0===i?void 0:i.cardSettings)||void 0===n?void 0:n.isFaceUp)||!1,o}return o(e,t),e.prototype.setCardThrowAnimation=function(t){this._cardThrowAnimation=t},e.prototype.addCards=function(t){var e=this;t.forEach((function(t,i){e.addCard(t)}))},e.prototype.addCard=function(t){var e,i,n,o,a=this,r=this,s=r.x,c=r.y,l=r.isFaceUp,p=(null===(i=null===(e=this.config)||void 0===e?void 0:e.cardSettings)||void 0===i?void 0:i.scale)||0,d=(null===(o=null===(n=this.config)||void 0===n?void 0:n.cardSettings)||void 0===o?void 0:o.spacing)||0,h=this.config.rotation||0;t.removeAllListeners(),this.hand.push(t),t.setDepth(this.hand.length),this.playCardMoveAnimation(t,this.hand.length-1,{isFaceUp:l,cardSpacing:d,animationOptions:{x:s,y:c,scale:p,rotation:h,onAnimationComplete:function(){a.makeCardSelectable(t),a.selectedCards=[],a.arrangeHandCards()}}})},e.prototype.removeCards=function(t){var e=this;t.length>0&&t.forEach((function(t){e.removeCard(t)}))},e.prototype.removeCard=function(t){var e=this;if(t){var i=this._cardThrowAnimation.isFaceUp,n=this._cardThrowAnimation.cardSpacing,o=this._cardThrowAnimation.animationOptions,r=o.x,s=o.y,c=o.scale,l=o.rotation,p=o.onAnimationComplete,d=this.selectedCards.indexOf(t);t.removeAllListeners(),this.playCardMoveAnimation(t,d,{isFaceUp:i,cardSpacing:n,animationOptions:{x:r,y:s,scale:c,rotation:l,onAnimationComplete:function(){a.Utils.removeCardFromArray(t,e.hand),e.arrangeThrownCards(t),p&&p()}}})}},e.prototype.arrangeHandCards=function(){var t,e,i,n,o=this.x,a=this.y,r=(null===(e=null===(t=this.config)||void 0===t?void 0:t.cardSettings)||void 0===e?void 0:e.scale)||0,s=(null===(n=null===(i=this.config)||void 0===i?void 0:i.cardSettings)||void 0===n?void 0:n.spacing)||0,c=this.config.rotation||0;this.arrangeCardsPosition(this.hand,s,o,a,r,c)},e.prototype.arrangeThrownCards=function(t){var e=this,i=this._cardThrowAnimation.cardSpacing,n=this._cardThrowAnimation.animationOptions,o=n.x,r=n.y,s=n.scale,c=n.rotation,l=n.onAnimationComplete;this.arrangeCardsPosition(this.selectedCards,i,o,r,s,c,(function(){a.Utils.removeCardFromArray(t,e.selectedCards),l&&l()}))},e.prototype.arrangeCardsPosition=function(t,e,i,n,o,a,r){var s=this,c=e,l=t.length*c/2-c/2;t.forEach((function(t,e){var p=-90===a||90===a?i:i-l+e*c,d=-90===a||90===a?n-l+e*c:n;s.playCardArrangeAnimation({target:t,x:p,y:d,scale:o,rotation:a,onComplete:function(){r&&r()}})}))},e.prototype.playCardArrangeAnimation=function(t){var e,i,n,o=t.target,r=t.x,s=t.y,c=t.scale||(null===(e=this.config.cardSettings)||void 0===e?void 0:e.scale),l=t.rotation||0,p=t.duration||200,d=t.ease||"linear",h=(null===(n=null===(i=this.config)||void 0===i?void 0:i.cardSettings)||void 0===n?void 0:n.origin)||a.Utils.ORIGIN.MiddleCenter;o.setOrigin(h.x,h.y),this.scene.add.tween({targets:o,x:r,y:s,scale:c,rotation:Phaser.Math.DegToRad(l),ease:d,duration:p,onComplete:function(){t.onComplete&&t.onComplete()}})},e.prototype.playCardMoveAnimation=function(t,e,i){var n=i.cardSpacing,o=i.isFaceUp,a=i.animationOptions,r=a.x,s=a.y,c=a.scale,l=a.rotation,p=a.options,d=a.onAnimationComplete,h=n||0,u=90===l||-90===l?r:r+h*e,f=90===l||-90===l?s+h*e:s;t.moveTo({x:u,y:f,scale:c,rotation:l,options:p,onAnimationComplete:function(){o&&!t.isFaceUp&&t.flip(),d&&d()}})},e.prototype.makeCardSelectable=function(t){var e=this;this.config.isMainPlayer&&t.on("pointerdown",(function(){t.selected()||e.toggleCardSelection(t)}))},e.prototype.toggleCardSelection=function(t){var e,i;this.selectedCards.includes(t)?(i=t.y+t.displayHeight/2,a.Utils.removeCardFromArray(t,this.selectedCards)):(i=t.y-t.displayHeight/2,this.selectedCards.push(t)),e=t.x,this.selectCardAnimation(t,e,i)},e.prototype.selectCardAnimation=function(t,e,i){t.selected(!0),this.scene.add.tween({targets:t,x:e,y:i,ease:"linear",duration:200,onComplete:function(){t.selected(!1)}})},e}(Phaser.GameObjects.GameObject);e.Player=r},992:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Utils=void 0;var i=function(){function t(){}return t.removeCardFromArray=function(t,e){var i=e.indexOf(t);e.splice(i,1)},t.ORIGIN={TopLeft:{x:0,y:0},TopCenter:{x:.5,y:0},TopRight:{x:1,y:0},MiddleLeft:{x:0,y:.5},MiddleCenter:{x:.5,y:.5},MiddleRight:{x:1,y:.5},BottomLeft:{x:0,y:1},BottomCenter:{x:.5,y:1},BottomRight:{x:1,y:1}},t}();e.Utils=i},399:function(t,e,i){var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(e,i);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,n,o)}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),o=this&&this.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||n(e,t,i)};Object.defineProperty(e,"__esModule",{value:!0}),o(i(694),e),o(i(265),e),o(i(684),e),o(i(992),e)}},i={};function n(t){var o=i[t];if(void 0!==o)return o.exports;var a=i[t]={exports:{}};return e[t].call(a.exports,a,a.exports,n),a.exports}n.m=e,t=[],n.O=(e,i,o,a)=>{if(!i){var r=1/0;for(p=0;p<t.length;p++){for(var[i,o,a]=t[p],s=!0,c=0;c<i.length;c++)(!1&a||r>=a)&&Object.keys(n.O).every((t=>n.O[t](i[c])))?i.splice(c--,1):(s=!1,a<r&&(r=a));if(s){t.splice(p--,1);var l=o();void 0!==l&&(e=l)}}return e}a=a||0;for(var p=t.length;p>0&&t[p-1][2]>a;p--)t[p]=t[p-1];t[p]=[i,o,a]},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={179:0};n.O.j=e=>0===t[e];var e=(e,i)=>{var o,a,[r,s,c]=i,l=0;if(r.some((e=>0!==t[e]))){for(o in s)n.o(s,o)&&(n.m[o]=s[o]);if(c)var p=c(n)}for(e&&e(i);l<r.length;l++)a=r[l],n.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return n.O(p)},i=self.webpackChunkphaser_playing_card=self.webpackChunkphaser_playing_card||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))})();var o=n.O(void 0,[426],(()=>n(607)));o=n.O(o)})();